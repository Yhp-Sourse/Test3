<template>
  <div id="v_header">
    <el-row :gutter="20">
      <el-col :span="5">
        <div class="logo"><span class="title">湖北运维管理子系统</span></div>
      </el-col>
      <el-col :span="11">
        <div>
          <el-menu
            :default-active="defaultActive"
            mode="horizontal"
            @select="handleSelect"
          >
            <el-menu-item
              v-for="item in menuData"
              :index="item.menu_id + ''"
              :key="item.menu_id"
            >
              <i :class="item.menu_icon"></i>
              {{ item.menu_name }}
            </el-menu-item>
          </el-menu>
        </div>
      </el-col>
      <el-col
        :span="4"
        style="
          overflow: hidden;
          display: flex;
          flex-direction: row;
          flex-wrap: nowrap;
          justify-content: flex-start;
          align-items: center;
        "
      >
        <div style="height: 90px"></div>
        <div
          v-for="(i, index) in BJNews"
          :key="index"
          :title="i.info"
          style="flex: 2; align-items: flex-end"
          @click="showBJData(i.dictCode)"
        >
          <!-- <span>{{i.info}}</span> -->
          <el-badge :value="i.total" :max="99" class="item">
            <svg
              v-if="i.dictCode == 1"
              t="1655448088632"
              class="icon"
              viewBox="0 0 1024 1024"
              version="1.1"
              xmlns="http://www.w3.org/2000/svg"
              p-id="15722"
              width="32"
              height="32"
            >
              <path
                d="M861.658508 1024c-44.589371 0-82.808832-19.10973-114.658382-44.589371l-203.837124-203.837124c-146.507933 57.329191-312.125597 25.479641-420.414069-89.178742C1.72064 565.36647-30.128911 393.378896 33.570191 240.501053c6.36991-12.73982 12.73982-19.10973 25.47964-19.10973s19.10973 0 25.479641 6.36991L256.517045 399.748807 396.655068 259.610784 224.667495 93.99312c-6.36991-12.73982-6.36991-19.10973-6.36991-31.849551s6.36991-19.10973 19.10973-25.47964c152.877843-70.069012 324.865417-38.219461 445.89371 82.808832 76.438922 76.438922 121.028293 184.727394 114.658382 293.015866 0 19.10973-12.73982 31.849551-31.849551 31.849551s-31.849551-12.73982-31.84955-31.849551c0-89.178742-31.849551-178.357484-101.918562-248.426495C549.532912 81.2533 422.134709 49.403749 307.476327 81.2533l159.247753 159.247753c12.73982 12.73982 12.73982 31.849551 0 44.589371L281.996686 469.817818c-12.73982 12.73982-31.849551 12.73982-44.589371 0L78.159562 310.570065c-31.849551 114.658382 0 242.056585 82.808831 324.865417 95.548652 95.548652 242.056585 127.398203 369.454788 70.069011 12.73982-6.36991 25.479641 0 38.219461 6.36991l216.576945 216.576945c38.219461 38.219461 101.918562 38.219461 140.138023 0s38.219461-101.918562 0-140.138023l-216.576945-216.576945c-12.73982-12.73982-12.73982-31.849551 0-44.589371s31.849551-12.73982 44.589371 0l216.576945 216.576945c63.699101 63.699101 63.699101 165.617664 0 229.316765-25.479641 31.849551-70.069012 50.959281-108.288473 50.959281z"
                fill="#d81e06"
                p-id="15723"
              ></path>
            </svg>
            <svg
              v-if="i.dictCode == 6"
              t="1655446794914"
              class="icon"
              viewBox="0 0 1024 1024"
              version="1.1"
              xmlns="http://www.w3.org/2000/svg"
              p-id="10097"
              width="32"
              height="32"
            >
              <path
                d="M370.090667 549.632v50.176h114.688v-50.176H370.090667z m114.688 106.922667H370.090667v31.061333H309.162667V386.56h175.616V337.578667h62.122666V386.56h177.408v299.264h-60.928v-29.269333h-116.48v117.674666h-62.122666v-117.674666z m62.122666-56.746667h116.48v-50.176h-116.48v50.176z m116.48-104.533333v-51.370667h-116.48v51.370667h116.48z m-178.602666-51.370667H370.090667v51.370667h114.688v-51.370667zM769.706667 258.133333v115.882667h-60.928V314.88H316.928v62.122667H256V258.133333h221.610667a449.28 449.28 0 0 0-15.530667-34.048L528.384 213.333333c4.778667 13.141333 9.557333 28.074667 14.336 44.8h226.986667z"
                p-id="10098"
                fill="#d81e06"
              ></path>
            </svg>
            <svg
              v-if="i.dictCode == 16"
              t="1655447089057"
              class="icon"
              viewBox="0 0 1024 1024"
              version="1.1"
              xmlns="http://www.w3.org/2000/svg"
              p-id="11155"
              width="32"
              height="32"
            >
              <path
                d="M512 781.824c81.408 0 128-52.736 128-144.384 0-98.816-104.448-219.136-108.544-224.256l-19.456-22.016-19.456 22.016c-4.608 5.12-108.544 125.952-108.544 224.256 0 91.648 46.592 144.384 128 144.384z m0-311.296c31.744 41.472 76.8 113.152 76.8 166.912 0 82.944-40.96 93.184-76.8 93.184s-76.8-10.752-76.8-93.184c0-53.248 45.568-124.928 76.8-166.912z"
                p-id="11156"
                fill="#d81e06"
              ></path>
              <path
                d="M509.44 710.656h2.048c28.672-3.072 48.128-22.528 54.272-53.248 2.048-3.584 3.072-8.192 2.56-12.8-0.512-2.56-0.512-4.096-0.512-5.12-2.048-19.968-20.48-19.968-20.992-19.968-7.68 0-19.456 5.632-19.968 20.48-1.024 18.944-7.68 29.184-19.456 30.208-11.264 1.024-19.456 11.264-17.92 22.528 0.512 10.24 9.728 17.92 19.968 17.92z"
                p-id="11157"
                fill="#d81e06"
              ></path>
              <path
                d="M949.248 410.624h-66.56c-35.328-72.192-91.136-132.608-159.744-174.08 54.784-36.352 88.576-72.704 88.576-72.704S677.376 20.48 512 20.48 212.48 164.352 212.48 164.352s33.792 36.352 88.576 72.704c-68.608 40.96-124.416 101.376-159.744 174.08h-66.56C33.792 410.624 0 444.416 0 485.888v268.8c0 41.472 33.792 74.752 74.752 74.752h100.864c74.752 104.96 197.632 174.08 336.384 174.08s261.632-68.608 336.384-174.08h100.864c41.472 0 74.752-33.792 74.752-74.752V485.888c0-41.472-33.792-75.264-74.752-75.264z m-310.784-184.32c9.216-18.432 14.336-39.424 14.336-61.952 0-22.016-5.12-43.008-14.336-61.44 39.424 18.432 72.704 42.496 96.768 61.44-23.552 19.456-57.344 43.008-96.768 61.952zM497.152 307.712c5.12 0 9.728 0.512 14.848 0.512s9.728 0 14.848-0.512c-5.12 0-9.728 0.512-14.848 0.512s-9.728 0-14.848-0.512zM783.36 593.92c0 149.504-121.856 271.36-271.36 271.36s-271.36-121.856-271.36-271.36 121.856-271.36 271.36-271.36 271.36 121.344 271.36 271.36zM512 74.752c49.152 0 89.6 40.448 89.6 89.6s-40.448 89.6-89.6 89.6-89.6-40.448-89.6-89.6 40.448-89.6 89.6-89.6z m-20.48 232.96c-3.072 0-6.144-0.512-8.704-0.512 3.072 0 6.144 0 8.704 0.512z m-15.872-1.536c-2.56-0.512-4.608-0.512-7.168-1.024 2.56 0 5.12 0.512 7.168 1.024z m-14.848-2.56c-2.048-0.512-4.096-0.512-5.632-1.024 1.536 0.512 3.584 1.024 5.632 1.024z m-14.336-2.56c-1.536-0.512-3.072-0.512-4.608-1.024 1.536 0 3.072 0.512 4.608 1.024z m-14.336-3.584c-1.024-0.512-2.048-0.512-3.072-1.024 1.024 0.512 2.048 1.024 3.072 1.024z m-13.824-3.584c-0.512 0-1.024-0.512-2.048-0.512 1.024 0 1.536 0 2.048 0.512z m188.928-1.024c-0.512 0-1.024 0.512-2.048 0.512 1.024 0 1.536 0 2.048-0.512z m-12.288 3.584c-1.024 0.512-2.048 0.512-3.072 1.024 1.024 0 2.048-0.512 3.072-1.024z m-12.8 3.584c-1.536 0.512-3.072 0.512-4.608 1.024 1.536-0.512 3.072-1.024 4.608-1.024z m-13.312 2.56c-2.048 0.512-4.096 0.512-5.632 1.024 2.048 0 4.096-0.512 5.632-1.024z m-13.824 2.56c-2.56 0.512-4.608 0.512-7.168 1.024 2.56-0.512 5.12-1.024 7.168-1.024z m-13.824 1.536c-3.072 0.512-6.144 0.512-8.704 0.512 2.56 0 5.632 0 8.704-0.512zM385.536 102.4c-9.216 18.432-14.336 39.424-14.336 61.952 0 22.016 5.12 43.008 14.336 61.44-39.424-18.432-72.704-42.496-96.768-61.44C312.32 144.896 346.112 121.344 385.536 102.4zM74.752 792.576c-20.992 0-37.888-16.896-37.888-37.888v-14.336h34.304c8.704 0 16.384-8.192 16.384-18.432s-7.168-18.432-16.384-18.432H36.864v-30.72h34.304c8.704 0 16.384-8.192 16.384-18.432s-7.168-18.432-16.384-18.432H36.864v-30.72h34.304c8.704 0 16.384-8.192 16.384-18.432s-7.168-18.432-16.384-18.432H36.864v-30.72h34.304c8.704 0 16.384-8.192 16.384-18.432s-7.168-18.432-16.384-18.432H36.864V486.4c0-20.992 16.896-37.888 37.888-37.888h50.688c-16.384 44.544-25.6 93.184-25.6 143.36 0 73.216 18.944 141.824 52.736 201.728H74.752zM512 952.32c-199.168 0-360.96-161.792-360.96-360.96 0-141.824 82.432-265.216 202.24-324.096 16.384 8.192 33.792 15.872 52.224 22.016C279.552 333.312 189.44 453.12 189.44 593.92c0 178.176 144.384 322.56 322.56 322.56s322.56-144.384 322.56-322.56c0-140.8-90.112-260.096-216.064-304.128 18.432-6.144 35.84-13.824 52.224-22.016 119.808 58.88 202.24 181.76 202.24 324.096 0 198.656-161.792 360.448-360.96 360.448zM312.832 244.224c0.512 0.512 1.024 0.512 1.536 1.024-0.512 0-1.024-0.512-1.536-1.024z m12.288 7.68c0.512 0.512 1.024 0.512 1.536 1.024-0.512-0.512-1.024-0.512-1.536-1.024z m13.824 7.68c0.512 0 0.512 0.512 1.024 0.512-0.512 0-1.024-0.512-1.024-0.512z m372.224-15.36c-0.512 0.512-1.024 0.512-1.536 1.024 0.512 0 1.024-0.512 1.536-1.024z m-12.288 7.68c-0.512 0.512-1.024 0.512-1.536 1.024 0.512-0.512 1.024-0.512 1.536-1.024z m-13.824 7.68c-0.512 0-0.512 0.512-1.024 0.512 0.512 0 1.024-0.512 1.024-0.512z m302.08 240.64h-34.304c-8.704 0-16.384 8.192-16.384 18.432s7.168 18.432 16.384 18.432h34.304v30.72h-34.304c-8.704 0-16.384 8.192-16.384 18.432s7.168 18.432 16.384 18.432h34.304v30.72h-34.304c-8.704 0-16.384 8.192-16.384 18.432s7.168 18.432 16.384 18.432h34.304v30.72h-34.304c-8.704 0-16.384 8.192-16.384 18.432s7.168 18.432 16.384 18.432h34.304v14.336c0 20.992-16.896 37.888-37.888 37.888h-77.312c33.28-59.392 52.736-128.512 52.736-201.728 0-50.688-9.216-98.816-25.6-143.36h50.688c20.992 0 37.888 16.896 37.888 37.888v15.36z"
                p-id="11158"
                fill="#d81e06"
              ></path>
              <path
                d="M512 164.352m-30.72 0a30.72 30.72 0 1 0 61.44 0 30.72 30.72 0 1 0-61.44 0Z"
                p-id="11159"
                fill="#d81e06"
              ></path>
            </svg>
            <svg
              v-if="i.dictCode == 3"
              t="1655447413449"
              class="icon"
              viewBox="0 0 1024 1024"
              version="1.1"
              xmlns="http://www.w3.org/2000/svg"
              p-id="13281"
              width="32"
              height="32"
            >
              <path
                d="M932.90496 68.11648H84.25472c-44.6464 0-80.85504 38.01088-80.85504 84.82816v532.02944c0 46.8992 36.20864 84.86912 80.85504 84.86912h288.03072v97.97632H315.22816v64.26624h-73.728v82.78016h534.07744v-82.78016h-73.64608v-64.26624h-57.09824v-97.97632h288.03072c44.6464 0 80.85504-38.01088 80.85504-84.86912V152.94464c0.04096-46.81728-36.16768-84.82816-80.81408-84.82816z m-7.53664 615.8336H91.79136V154.05056h833.57696v529.89952z"
                fill="#d81e06"
                p-id="13282"
              ></path>
              <path
                d="M670.80192 282.58304l-53.61664-54.31296-108.58496 110.05952-108.62592-110.05952-53.61664 54.31296 108.62592 110.05952-108.62592 110.10048L399.9744 557.056l108.62592-110.05952 108.58496 110.05952 53.61664-54.31296-108.62592-110.10048z"
                fill="#d81e06"
                p-id="13283"
              ></path>
            </svg>
            <svg
              v-if="i.dictCode == 4"
              t="1655447637388"
              class="icon"
              viewBox="0 0 1024 1024"
              version="1.1"
              xmlns="http://www.w3.org/2000/svg"
              p-id="13739"
              width="32"
              height="32"
            >
              <path
                d="M538.737778 278.869333l-52.337778-0.113777-0.568889 231.765333-153.031111 129.820444 33.905778 39.936 171.349333-145.408 0.682667-256zM739.555556 568.888889a170.666667 170.666667 0 1 0 170.666666 170.666667 170.666667 170.666667 0 0 0-170.666666-170.666667z m0 284.444444a28.899556 28.899556 0 1 1 28.899555-28.899555A28.899556 28.899556 0 0 1 739.555556 853.333333z m19.228444-82.944h-38.456889L710.656 625.777778h57.799111z"
                fill="#d81e06"
                p-id="13740"
              ></path>
              <path
                d="M554.780444 851.399111a353.962667 353.962667 0 0 1-42.780444 2.730667A342.129778 342.129778 0 1 1 854.129778 512a353.962667 353.962667 0 0 1-2.730667 42.780444 215.153778 215.153778 0 0 1 49.720889 41.528889A398.222222 398.222222 0 1 0 596.309333 901.12a215.153778 215.153778 0 0 1-41.528889-49.720889z"
                fill="#d81e06"
                p-id="13741"
              ></path>
            </svg>
            <!-- <svg  t="1618283618208" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7795" width="32" height="32"><path d="M518.827 150.187c20.48 0 37.546-17.067 37.546-37.547V37.547C556.373 17.067 539.307 0 518.827 0S481.28 17.067 481.28 37.547v75.093c0 20.48 17.067 37.547 37.547 37.547z m283.306 75.093l51.2-51.2c13.654-13.653 13.654-37.547 0-51.2-13.653-13.653-37.546-13.653-51.2 0l-51.2 51.2c-13.653 13.653-13.653 37.547 0 51.2 13.654 17.067 37.547 17.067 51.2 0z m-563.2 0c13.654 13.653 37.547 13.653 51.2 0 17.067-13.653 17.067-37.547 3.414-51.2l-54.614-51.2c-13.653-13.653-37.546-13.653-51.2 0-13.653 13.653-13.653 37.547 0 51.2l51.2 51.2zM47.787 467.627h75.093c20.48 0 37.547-17.067 37.547-37.547 0-20.48-17.067-37.547-37.547-37.547H47.787c-20.48 0-37.547 17.067-37.547 37.547 0 20.48 17.067 37.547 37.547 37.547z m863.573 0h75.093c20.48 0 37.547-17.067 37.547-37.547 0-20.48-17.067-37.547-37.547-37.547H911.36c-20.48 0-37.547 17.067-37.547 37.547 0 20.48 17.067 37.547 37.547 37.547zM986.453 901.12H819.2V525.653c0-163.84-136.533-300.373-300.373-300.373S218.453 361.813 218.453 525.653V901.12H47.787c-20.48 0-37.547 17.067-37.547 37.547s17.067 37.546 37.547 37.546h938.666c20.48 0 37.547-17.066 37.547-37.546s-17.067-37.547-37.547-37.547zM518.827 447.147L634.88 645.12l-119.467 13.653 20.48 150.187-133.12-194.56 122.88-17.067-6.826-150.186z" p-id="7796" fill="#ffffff"></path></svg> -->
          </el-badge>
        </div>
      </el-col>
      <el-col :span="4">
        <div class="userInfo">
          <div>
            <!-- <svg t="1655454300293" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4479" width="50" height="50"><path d="M406.974359 708.923077h210.051282c159.507692 0 288.820513 129.312821 288.820513 288.820513H118.153846c0-159.507692 129.312821-288.820513 288.820513-288.820513z" fill="#C2E8FF" p-id="4480"></path><path d="M617.025641 698.420513h-210.051282c-165.310359 0-299.323077 134.012718-299.323077 299.323077 0 5.802667 4.726154 10.502564 10.502564 10.502564h787.692308a10.502564 10.502564 0 0 0 10.502564-10.633846l-0.105026-7.561846c-4.174769-162.133333-136.822154-291.629949-299.218051-291.629949z m0 21.005128l7.53559 0.105026c145.04041 3.859692 262.826667 118.810256 270.388513 263.404307l0.157538 4.306052H128.866462l0.183794-4.516103c7.798154-146.720821 129.260308-263.299282 277.924103-263.299282h210.051282z" fill="#7496C4" p-id="4481"></path><path d="M512 472.615385a131.282051 131.282051 0 0 1 131.282051 131.282051v105.025641l-131.282051 105.025641-131.282051-105.025641v-105.025641a131.282051 131.282051 0 0 1 131.282051-131.282051z" fill="#FBD998" p-id="4482"></path><path d="M512 462.112821a141.784615 141.784615 0 0 0-141.784615 141.784615v105.025641a10.502564 10.502564 0 0 0 3.938461 8.218256l131.282051 105.025641a10.502564 10.502564 0 0 0 13.128206 0l131.282051-105.025641a10.502564 10.502564 0 0 0 3.938461-8.218256v-105.025641a141.784615 141.784615 0 0 0-141.784615-141.784615z m5.513846 21.13641A120.779487 120.779487 0 0 1 632.779487 603.897436v99.958154l-120.779487 96.623589-120.779487-96.597333v-99.98441a120.779487 120.779487 0 0 1 120.779487-120.779487l5.513846 0.131282z" fill="#967A44" p-id="4483"></path><path d="M699.028206 456.216972a32.085333 53.484308 33 1 0 53.818049 34.94985 32.085333 53.484308 33 1 0-53.818049-34.94985Z" fill="#FBD998" p-id="4484"></path><path d="M324.966908 456.21842a53.484308 32.085333 57 1 1-53.81805 34.94985 53.484308 32.085333 57 1 1 53.81805-34.94985Z" fill="#FBD998" p-id="4485"></path><path d="M759.729231 421.651692c-19.797333-12.865641-49.545846 1.68041-67.872821 29.906052s-19.508513 61.308718 0.288821 74.174359c19.797333 12.865641 49.572103-1.68041 67.899077-29.906052s19.482256-61.308718-0.315077-74.174359z m-9.321026 14.362257c9.924923 6.432821 9.110974 29.144615-4.726154 50.491077-13.863385 21.320205-34.290872 31.297641-44.215795 24.86482-9.924923-6.432821-9.110974-29.170872 4.726154-50.491077 13.863385-21.320205 34.290872-31.323897 44.215795-24.86482zM264.270769 421.651692c19.797333-12.865641 49.545846 1.68041 67.872821 29.906052s19.508513 61.308718-0.288821 74.174359c-19.797333 12.865641-49.572103-1.68041-67.899077-29.906052s-19.482256-61.308718 0.315077-74.174359z m9.321026 14.362257c-9.924923 6.432821-9.110974 29.144615 4.726154 50.491077 13.863385 21.320205 34.290872 31.297641 44.215795 24.86482 9.924923-6.432821 9.110974-29.170872-4.726154-50.491077-13.863385-21.320205-34.290872-31.323897-44.215795-24.86482z" fill="#967A44" p-id="4486"></path><path d="M452.791795 278.475487c50.333538 0 139.841641-34.238359 166.413128-81.053538 22.974359 15.570051 88.142769 37.888 88.142769 129.706666l-0.65641 211.862975c0 79.661949-72.073846 135.640615-129.627897 164.995282-17.486769 8.927179-27.306667 30.72-69.658257 30.72s-62.437744-29.722256-72.835282-36.758975c-71.154872-33.818256-118.206359-81.92-127.894974-158.956307l0.65641-190.201436c0-37.205333 68.135385-70.28841 145.460513-70.28841z" fill="#FBD998" p-id="4487"></path><path d="M611.748103 193.194667c-21.740308 38.334359-99.091692 74.174359-153.258667 76.616205l-5.697641 0.131282c-81.342359 0-154.020103 35.18359-154.020103 78.848l-0.65641 190.148923c9.609846 76.852513 53.825641 129.181538 132.778667 166.728205l10.502564 9.793641c2.940718 2.678154 5.855179 5.251282 7.798154 6.826667 16.804103 13.390769 35.262359 21.005128 58.210461 21.005128 22.659282 0 37.625436-5.198769 52.512821-16.01641l4.069743-3.072c1.575385-1.234051 7.483077-6.091487 8.92718-7.220513 3.150769-2.468103 5.592615-4.122256 8.034461-5.382564 79.740718-40.644923 134.301538-100.430769 134.301539-172.609641l0.65641-211.836718c0-51.173744-18.589538-85.910974-51.357538-111.222154l-4.647385-3.360821a613.979897 613.979897 0 0 0-35.918769-22.239179 8.55959 8.55959 0 0 0-12.235487 2.861949z m8.900923 17.513025l1.234051-1.811692 14.257231 8.664615c7.036718 4.384821 14.047179 8.927179 17.959384 11.920411 28.724513 22.186667 44.68841 52.040205 44.688411 97.647589l-0.656411 211.836718c0 64.196923-50.359795 119.361641-124.954256 157.40718-2.363077 1.207795-4.647385 2.625641-7.089231 4.332308l-3.754667 2.809435-8.953435 7.273026c-13.469538 10.633846-25.389949 15.386256-45.948718 15.386256-18.720821 0-33.581949-6.117744-47.550359-17.276717l-6.616616-5.776411c-5.461333-4.936205-12.025436-11.001436-13.889641-12.261743-75.172103-35.84-115.475692-83.521641-124.19282-152.94359l0.708923-189.098667c0-29.932308 60.022154-59.890872 130.284307-61.702564l6.616616-0.078769c55.926154 0 136.270769-34.527179 167.857231-76.327385z" fill="#967A44" p-id="4488"></path><path d="M506.617436 27.542974c105.629538 11.579077 105.682051 66.376205 125.29559 67.505231 238.513231 13.810872 111.064615 368.351179 75.434666 368.35118h-0.446359l0.446359-136.27077c0-89.193026-61.492513-112.797538-86.094769-128.367589l-2.048-1.339077c-26.571487 46.815179-116.053333 81.079795-166.413128 81.079795-77.325128 0-145.460513 33.083077-145.460513 70.28841l-0.420103 114.582974-0.262564 0.026257C234.390974 316.416 225.227487 202.436923 279.236923 121.462154c35.498667-53.221744 135.483077-103.975385 227.406769-93.91918z" fill="#A7714E" p-id="4489"></path><path d="M272.095179 116.736c-56.031179 83.994256-46.631385 201.019077 26.886565 350.444308a8.507077 8.507077 0 0 0 6.485333 4.673641l2.179282 0.052513a8.55959 8.55959 0 0 0 7.82441-8.507077l0.420103-114.582975 0.157538-2.835692c3.124513-28.882051 62.070154-57.107692 130.126769-58.840615l12.708103-0.210052c55.506051-2.363077 131.334564-35.918769 161.739487-76.222359l1.155282-1.68041 12.209231 7.089231c7.798154 4.594872 14.073436 8.717128 20.11241 13.390769 28.724513 22.16041 44.68841 52.013949 44.688411 97.621333l-0.446359 136.218257c0 3.938462 2.625641 7.273026 6.275282 8.270769l2.363077 0.341333c27.910564 0 67.794051-100.877128 73.990564-186.945641 8.270769-114.950564-37.861744-192.091897-148.55877-198.498461-0.630154-0.026256-1.444103-0.446359-2.888205-1.785436l-6.695384-8.244513c-6.065231-7.273026-15.018667-17.486769-21.21518-22.764308C580.371692 35.708718 550.728205 23.788308 507.53641 19.062154 418.500923 9.242256 312.503795 56.083692 272.095179 116.736zM505.698462 36.023795c39.909744 4.384821 66.323692 15.018667 84.808205 30.72 8.769641 7.430564 26.335179 29.512205 27.306666 30.431179a21.241436 21.241436 0 0 0 13.627077 6.406564c99.511795 5.750154 140.130462 73.675487 132.46359 180.171488l-0.525128 6.459077c-5.618872 60.232205-29.249641 128.787692-45.42359 154.308923l-2.468103 3.544615 0.420103-120.937026c0-51.173744-18.589538-85.910974-51.357538-111.222153a186.157949 186.157949 0 0 0-15.858872-10.922667l-22.843077-13.469539-1.969231-1.31282a8.55959 8.55959 0 0 0-12.130461 2.966974c-21.740308 38.334359-99.091692 74.174359-153.258667 76.616205l-5.697641 0.131282c-78.506667 0-149.293949 32.846769-153.783795 74.673231l-0.210051 3.72841-0.315077 77.220103-2.363077-5.40882C242.084103 294.754462 239.169641 196.923077 286.326154 126.214564 323.111385 71.049846 422.859487 26.939077 505.698462 36.050051z" fill="#7A4F35" p-id="4490"></path><path d="M380.717949 708.923077l133.855179 105.025641-131.282051 39.384615z" fill="#C2E8FF" p-id="4491"></path><path d="M644.148513 708.923077l-133.85518 105.025641 131.282052 39.384615z" fill="#C2E8FF" p-id="4492"></path><path d="M370.215385 709.106872l2.573128 144.410256a10.502564 10.502564 0 0 0 13.522051 9.87241l131.282051-39.384615a10.502564 10.502564 0 0 0 3.465847-18.300718l-133.85518-105.025641a10.502564 10.502564 0 0 0-16.987897 8.428308z m21.372718 21.714051l100.562051 78.874256-98.619077 29.590975-1.942974-108.438975z" fill="#7496C4" p-id="4493"></path><path d="M654.677333 709.106872l-2.573128 144.410256a10.502564 10.502564 0 0 1-13.522051 9.87241l-131.282051-39.384615a10.502564 10.502564 0 0 1-3.465847-18.300718l133.85518-105.025641a10.502564 10.502564 0 0 1 16.987897 8.428308z m-21.398974 21.714051l-100.562051 78.900513 98.645333 29.564718 1.916718-108.438975z" fill="#7496C4" p-id="4494"></path><path d="M512 892.717949l78.769231-139.053949-78.769231 34.028308-78.769231-34.028308z" fill="#4E7AB6" p-id="4495"></path><path d="M512 787.692308l78.769231 210.051282h-157.538462z" fill="#4E7AB6" p-id="4496"></path></svg> -->
            <!-- <svg t="1655454336775" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5399" width="50" height="50"><path d="M137.756924 723.778345c0.349997-14.06289 0.644995-27.062789 0.766994-37.10771 5.854954-9.775924 19.830845-15.552878 45.376645-24.404809 8.97493-3.109976 18.261857-6.326951 27.584785-10.26392 15.909876-6.708948 32.499746-13.843892 49.245615-21.041835 24.971805-10.732916 50.779603-21.824829 74.704416-31.661753l32.621746-8.91193a35.523722 35.523722 0 0 0 10.820915-5.027961c13.252896-9.112929 23.533816-24.484809 32.856743-42.24067 0.817994-1.550988 1.602987-3.187975 2.403982-4.765963 0.443997-0.871993 0.880993-1.743986 1.315989-2.612979a607.918251 607.918251 0 0 0 7.858939-16.346873l1.603987-3.449973c2.229983-4.782963 3.292974-9.887923 3.301975-14.958883 0-0.104999 0.018-0.209998 0.017999-0.305998-0.009-1.350989-0.157999-2.683979-0.313997-4.016968-0.043-0.383997-0.035-0.767994-0.096999-1.149991-0.155999-1.044992-0.452996-2.072984-0.703995-3.100976-0.156999-0.644995-0.252998-1.30799-0.444996-1.943985-0.347997-1.141991-0.827994-2.247982-1.29799-3.353974-0.200998-0.488996-0.348997-1.001992-0.573996-1.488988a35.88772 35.88772 0 0 0-5.881954-8.773931c-37.368708-40.99568-61.565519-97.122241-67.028476-153.887798a255.492004 255.492004 0 0 1-1.175991-24.31681c0-19.098851 0.767994-36.611714 2.222983-52.668589 10.148921-112.422122 53.635581-153.5818 99.535222-167.731689 17.486863-5.392958 35.330724-6.865946 51.815595-6.865947 22.653823 0 47.887626 2.788978 71.236444 14.716885 44.574652 22.766822 82.319357 78.869384 82.319357 212.55034 0 44.409653-11.998906 89.698299-33.31874 128.888993-9.766924 17.94086-21.478832 34.60673-34.886728 49.315615a35.429723 35.429723 0 0 0-5.872954 8.764931 35.666721 35.666721 0 0 0-3.412973 14.742885c0 0.093999-0.019 0.189999-0.028 0.295998-0.009 1.077992 0.122999 2.159983 0.218998 3.239974 0.051 0.651995 0.035 1.30799 0.129999 1.952985 0.078999 0.529996 0.244998 1.061992 0.340998 1.593988 0.226998 1.183991 0.427997 2.376981 0.774994 3.553972 0.008 0.051 0.035 0.095999 0.051999 0.147999a35.666721 35.666721 0 0 0 1.811986 4.800962l1.595988 3.449973c12.624901 27.341786 25.527801 52.956586 44.435653 65.966485a35.715721 35.715721 0 0 0 10.821915 5.027961l32.629745 8.91193c20.632839 8.485934 42.648667 17.89586 64.344497 27.218787 3.501973 1.497988 7.013945 3.005977 10.488918 4.505965h0.011c16.68487 7.177944 33.22874 14.287888 49.103617 20.978836 9.313927 3.936969 18.602855 7.152944 27.585784 10.26392 25.5368 8.852931 39.512691 14.628886 45.376646 24.404809 0.113999 10.045922 0.417997 23.04582 0.758994 37.10771 0.191999 8.158936 0.395997 167.036695 0.573995 300.213655h79.464379c-0.204998-135.493941-0.598995-286.574761-0.964992-301.920641-0.417997-17.226865-0.792994-32.804744-0.792994-42.954665 0-3.963969-0.661995-7.894938-1.950985-11.640909-16.066874-46.553636-57.826548-61.025523-91.380286-72.647432-8.244936-2.857978-16.042875-5.559957-23.194818-8.581933-15.787877-6.665948-32.228748-13.731893-48.817619-20.858837-1.463989-0.627995-2.952977-1.26399-4.425965-1.898985-24.568808-10.567917-49.759611-21.380833-73.396427-31.062758a36.549714 36.549714 0 0 0-4.182967-1.418988l-25.772799-7.039945c-3.083976-4.260967-6.777947-11.040914-10.122921-17.679862 7.134944-9.155928 13.722893-18.749854 19.864845-28.647777 32.933743-53.052586 51.2406-115.775096 51.2406-178.996601 0-123.418036-30.582761-198.069453-73.990422-241.87811S563.316599 0 512.007 0h-0.01c-93.000273 0-202.18142 42.554668-221.828267 234.24617-2.038984 19.830845-3.110976 41.255678-3.110976 64.396497 0 4.687963 0.103999 9.374927 0.295998 14.05289 0.435997 10.167921 1.376989 20.301841 2.727979 30.382763 1.757986 13.095898 4.242967 26.084796 7.501941 38.867696 2.168983 8.537933 4.704963 16.972867 7.517941 25.311802 0.165999 0.496996 0.304998 0.992992 0.478997 1.489989 0.470996 1.358989 1.001992 2.701979 1.480988 4.059968 12.058906 33.727737 29.274771 65.477488 51.101601 93.48027-0.322997 0.636995-0.652995 1.26399-0.975993 1.899985-0.591995 1.139991-1.176991 2.290982-1.777986 3.415973-0.269998 0.496996-0.529996 0.974992-0.800993 1.461989a185.179553 185.179553 0 0 1-2.151984 3.85297 103.189194 103.189194 0 0 1-1.375989 2.334981c-0.139999 0.241998-0.287998 0.487996-0.435996 0.730995a74.636417 74.636417 0 0 1-2.256983 3.440973l0.027 0.01c-0.121999 0.163999-0.252998 0.382997-0.365997 0.539995l-25.772799 7.030946c-1.429989 0.391997-2.823978 0.861993-4.181967 1.418988-25.041804 10.26492-51.876595 21.80883-77.840392 32.961743-16.58987 7.126944-33.022742 14.192889-48.810619 20.858837-7.161944 3.021976-14.950883 5.723955-23.193818 8.581933-33.561738 11.621909-75.313412 26.094796-91.380287 72.647432a35.742721 35.742721 0 0 0-1.951984 11.640909c0 10.149921-0.382997 25.728799-0.800994 42.954665-0.366997 15.34588-0.760994 166.4267-0.964992 301.920641h64.035499c0.177999-133.17696 0.377997-292.054718 0.570996-300.213655z" p-id="5400"></path><path d="M755.887095 906.035922h-30.611761l-15.306881-26.510793-15.30688-26.511793 15.30688-26.512793 15.306881-26.509793H813.406645c-0.849993-1.385989-1.739986-2.741979-2.650979-4.082968-18.299857-26.91379-49.153616-44.599652-84.150343-44.599652h-58.87154l-34.47173 59.707534-5.672956-0.001H488.210186l-12.635901 0.001-84.891337-0.001-34.470731-59.706534h-58.81454c-35.222725 0-66.252482 17.91186-84.50634 45.117648a102.559199 102.559199 0 0 0-2.298982 3.563972h88.132311l15.306881 26.509793 15.30488 26.512793-15.30488 26.511793-15.306881 26.510793H210.592355a101.214209 101.214209 0 0 0 3.195975 4.885961c18.363857 26.461793 48.958618 43.796658 83.609347 43.796658h58.81454l34.470731-59.706533h242.580105l34.47073 59.706533h58.87154v-0.001c34.996727 0 65.851486-17.684862 84.150343-44.598651a103.268193 103.268193 0 0 0 2.650979-4.082968H755.887095z" p-id="5401"></path></svg> -->
            <!-- <svg t="1655454235641" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3687" width="50" height="50"><path d="M452.103884 487.053091h-58.837049a35.302229 35.302229 0 0 1-35.302229-35.302229v-36.831993a35.302229 35.302229 0 0 1 35.302229-35.302229h58.837049a35.302229 35.302229 0 0 1 35.30223 35.302229v37.067341a35.302229 35.302229 0 0 1-35.30223 35.066881z m-58.837049-85.078373a13.061825 13.061825 0 0 0-13.061825 12.944151v37.067341a13.061825 13.061825 0 0 0 13.061825 13.061825h58.837049A13.061825 13.061825 0 0 0 464.930361 451.98621v-37.067341a13.061825 13.061825 0 0 0-13.061825-12.944151zM632.733624 487.053091h-58.837049a35.302229 35.302229 0 0 1-35.302229-35.302229v-36.831993a35.302229 35.302229 0 0 1 35.302229-35.302229h58.837049a35.302229 35.302229 0 0 1 35.30223 35.302229v37.067341a35.302229 35.302229 0 0 1-35.30223 35.066881z m-58.837049-85.078373a13.061825 13.061825 0 0 0-13.061824 12.944151v37.067341a13.061825 13.061825 0 0 0 13.061824 13.061825h58.837049a13.061825 13.061825 0 0 0 13.061825-13.061825v-37.067341a13.061825 13.061825 0 0 0-13.061825-12.944151z" p-id="3688"></path><path d="M512.823719 651.326132l-3.530223-1.176741C363.495288 600.137899 338.54838 451.633188 337.489313 445.396461v-103.906229a68.957021 68.957021 0 0 1 12.591128-33.066421c6.472075-10.237647 38.47943-31.772006 64.367732-48.128706l6.119053-3.765572 6.354401 3.177201a376.557113 376.557113 0 0 0 201.105034 38.361756h3.647897A67.78028 67.78028 0 0 1 689.45254 364.789704L688.511147 445.631809c-34.125488 166.979545-166.2735 203.340841-171.921857 204.75293zM362.67157 442.336934c2.235808 11.76741 28.71248 137.56102 151.093541 182.512526 20.592967-6.707424 121.086647-45.775224 149.799127-183.100896v-77.194209A42.598023 42.598023 0 0 0 629.674098 323.486095a399.385888 399.385888 0 0 1-207.459435-37.891059 400.091933 400.091933 0 0 0-50.24684 35.890599 47.069639 47.069639 0 0 0-8.943231 22.593427v20.592967z" p-id="3689"></path><path d="M686.039991 379.969662v22.005056a47.069639 47.069639 0 0 1 0 94.727649v22.005057a69.427718 69.427718 0 0 0 0-138.737762zM337.960009 379.969662v22.005056a47.069639 47.069639 0 0 0 0 94.727649v22.005057a69.427718 69.427718 0 0 1 0-138.737762z" p-id="3690"></path><path d="M616.259251 11.76741l-8.472535-11.76741-10.355321 9.76695a372.556194 372.556194 0 0 1-201.57573 83.54861c-1.412089 0-141.208917 22.12273-141.208917 159.919099v204.988278c0 2.58883 7.060446 62.131924 100.022983 62.131924h11.76741l-12.708803-25.299931c-65.309124-0.823719-73.546311-34.596185-74.252355-38.832452V253.234659c0-115.555964 115.085268-134.148472 119.439209-134.854517a403.151459 403.151459 0 0 0 204.988278-80.842105c122.498736 167.803264 130.3829 211.813376 130.971271 216.991037v179.099977c0 58.837049-40.950586 61.190531-45.304527 61.425879h-19.769249l-10.943691 25.299931h30.71294c0.706045 0 70.604459-1.882786 70.604458-86.72581V256.176511c0.58837-13.650195-11.885084-65.309124-143.915421-244.409101z" p-id="3691"></path><path d="M446.220179 610.728568h22.005057v54.130085h-22.005057zM555.892439 610.728568h22.005056v54.130085h-22.005056z" p-id="3692"></path><path d="M888.557113 867.846472c-20.828315-103.788554-95.90439-136.97265-99.316938-138.267065l-216.638015-88.255573L512 708.280395l-60.60216-67.074235L234.524477 729.579407c-3.177201 1.412089-78.253275 34.596185-98.846242 138.384739L135.442887 1023.764652h753.114226V870.08228z m-21.769708 134.148472H157.447943V870.788325c18.592507-91.197426 83.077913-120.262928 85.666743-121.321995l202.281775-82.371869 51.776603 57.307286-13.76787 15.062284v90.491382h22.122731v-82.371869L512 741.346817l6.472075 7.295794v82.371868h22.122731v-91.197425l-13.76787-15.062285 51.776603-57.307286 202.164101 82.371869c2.706504 1.176741 67.19191 30.242243 85.784417 121.439669z" p-id="3693"></path><path d="M498.997012 814.65778l28.535969 28.535969-15.556516 15.568283-28.547736-28.547736z" p-id="3694"></path><path d="M540.618341 830.33197l-28.535969 28.547736-15.556516-15.556516 28.535969-28.547736zM494.937256 873.730177h34.125488v34.125488h-34.125488zM494.937256 946.688118h34.125488v34.125488h-34.125488zM290.537348 897.382671h34.007814V1011.997242h-34.007814zM703.691105 906.443576h34.007815v114.614572h-34.007815zM585.193289 28.71248l-13.414847 11.76741 26.829694-1.176741-4.236267 5.17766 9.413927-6.942772 20.710642 28.71248c14.826936 10.590669 18.357159 28.359458 18.357159 47.775684a57.777982 57.777982 0 0 1-57.777982 57.895656h-28.477132V200.045966h28.594806a85.431395 85.431395 0 1 0 0-170.745116z" p-id="3695"></path></svg> -->
            <img
              style="width: 55px; height: 55px; border-radius: 50%"
              src="../../assets/Images/profile.jpg"
            />
            <!-- <el-image
                          style="width: 55px; height: 55px;border-radius:50%;"
                          src='../../assets/Images/profile.jpg'
                          fit="contain"></el-image> -->
          </div>
          <div class="info">
            <div class="usr" @click="drawer = true">
              {{ userName }}
              &nbsp;&nbsp;&nbsp;<el-link
                class="exit"
                type="warning"
                @click.stop="goExit"
                >退出</el-link
              >
            </div>
            <div class="time">
              <span>{{ time }}</span>
            </div>
          </div>
          <!-- <div class="setting">
                     <i class="el-icon-setting"></i>
                  </div> -->
        </div>
      </el-col>
    </el-row>

    <el-drawer
      style="height: 250px"
      size="30%"
      title=""
      v-model:visible="drawer"
      :direction="direction"
    >
      <el-form
        ref="Form"
        :model="loginForm"
        :rules="rules"
        label-width="100px"
        class="login-box"
      >
        <el-form-item label="新密码：" prop="newPassword">
          <el-input
            type="password"
            placeholder="请输入新密码"
            @input="input()"
            v-model:value="loginForm.newPassword"
          />
        </el-form-item>
        <el-form-item label="密码强度：" prop="level">
          <div style="color: red; text-align: center">
            {{
              loginForm.level == 0
                ? '弱'
                : loginForm.level == 1
                ? '弱'
                : loginForm.level == 2
                ? '中'
                : '高'
            }}
          </div>
        </el-form-item>
        <el-form-item>
          <el-button type="primary" @click="changePassword('Form')"
            >确定</el-button
          >
        </el-form-item>
      </el-form>
    </el-drawer>

    <el-dialog title="" v-model:visible="dialogVisible" width="90%">
      <ywAlarmRemind :NewType="NewType"></ywAlarmRemind>
    </el-dialog>
  </div>
</template>

<script>
import { $on, $off, $once, $emit } from '../../utils/gogocodeTransfer'
import ywAlarmRemind from '../pages/ywAlarmManage/ywAlarmRemind'

export default {
  name: 'v_header',
  data() {
    return {
      NewType: '',
      dialogVisible: true,
      defaultActive: '1',
      menuData: [],
      timer: '',
      time: '',
      userName: '',
      drawer: false,
      direction: 'rtl',
      loginForm: {
        usr_id: 0,
        newPassword: '',
        level: 0,
      },
      // 表单验证，需要在 el-form-item 元素中增加 prop 属性
      rules: {
        newPassword: [
          { required: true, message: '新密码不可以为空！', trigger: 'blur' },
          { min: 6, max: 16, message: '长度在 6 到 16 个字符' },
          // {pattern: /^(\w){6,16}$/,message: '只能输入6-16个字母、数字、特殊字符'},
        ],
        level: [
          // {required: true, message: '新密码安全等级不够高，请使用【字母+特殊字符+数字】组合！', trigger: 'blur'},
          {
            validator: function (rule, value, callback) {
              if (value < 3) {
                callback(
                  new Error(
                    '新密码安全等级不够高，请使用【字母大小写+数字】组合！'
                  )
                )
              } else {
                callback()
              }
            },
            trigger: 'change',
          },
        ],
      },
      BJNews: [],
    }
  },
  mounted() {
    this.dialogVisible = false
    this.InitFirstMenu()
    this.InitTreeSStation()
    this.InitBJType()
    this.timer = setInterval(this.getCurrentTime, 1000)
    this.userName =
      sessionStorage.getItem('currentUserName') == ''
        ? '去登录'
        : sessionStorage.getItem('currentUserName')
  },
  beforeUnmount() {
    clearInterval(this.timer)
  },
  components: {
    ywAlarmRemind,
  },
  emits: ['parentFn'],
  methods: {
    filterDate_filter(t) {
      const date = new Date(t)
      const y = date.getFullYear()
      const M = (date.getMonth() + 1).toString().padStart(2, 0)
      const d = date.getDate().toString().padStart(2, 0)
      const h = date.getHours().toString().padStart(2, 0)
      const mm = date.getMinutes().toString().padStart(2, 0)
      const s = date.getSeconds().toString().padStart(2, 0)
      return y + '-' + M + '-' + d + ' ' + h + ':' + mm + ':' + s
    },
    goExit() {
      var self = this
      this.$confirm('确认退出系统？')
        .then(function () {
          sessionStorage.removeItem('Authorization')
          clearInterval(self.timer)
          self.$router.push('/login')
        })
        .catch(function () {})
    },
    input() {
      this.loginForm.level = this.getLvl(this.loginForm.newPassword)
    },
    getLvl(val) {
      var level = 0
      if (val.length < 6) return 0
      if (/\d/.test(val)) level++ //数字
      if (/[a-z]/.test(val)) level++ //小写
      if (/[A-Z]/.test(val)) level++ //大写
      if (/\W/.test(val)) level++ //特殊字符
      return level
    },
    changePassword(formName) {
      const Qs = require('qs')
      let _this = this
      _this.loginForm.usr_id = sessionStorage.getItem('currentUserId')
      // 为表单绑定验证功能
      this.$refs[formName].validate((valid) => {
        if (valid) {
          this.$http({
            headers: {
              deviceCode: 'A95ZEF1-47B5-AC90BF3',
            },
            method: 'post',
            url: _this.api + '/api/Upload/ChangePwd',
            data: _this.Qs.stringify(_this.loginForm),
          }).then((res) => {
            if (res.data.code == '200') {
              _this.$message({
                message: res.data.message,
                type: res.data.type,
              })
              _this.drawer = false
              sessionStorage.removeItem('Authorization')
              clearInterval(_this.timer)
              _this.$router.push('/login')
            } else {
              _this.$message({
                message: res.data.message,
                type: res.data.type,
              })
            }
          })
        } else {
          this.drawer = true
          // this.$message.error("密码安全等级不够高，请使用【字母+特殊字符+数字】组合！");
          return false
        }
      })
    },
    InitBJType() {
      var Enumerable = require('linq')
      this.$http({
        method: 'GET',
        url: this.api + '/api/Select/GetSelectList?TypeCode=004001',
      })
        .then((res) => {
          if (res.status == 200) {
            this.BJNews = Enumerable.from(res.data.data)
              .where(
                (o) =>
                  o.dictCode == 3 ||
                  o.dictCode == 16 ||
                  o.dictCode == 4 ||
                  o.dictCode == 1 ||
                  o.dictCode == 6
              )
              .orderBy('p=>p.id')
              .toArray()
            this.BJNews.forEach((item) => {
              this.$http({
                method: 'GET',
                url:
                  this.api +
                  '/api/AlarmRemind/GetAllAlarmMessage?pageSize=10&pageIndex=1&NewType=' +
                  item.dictCode,
              })
                .then((res) => {
                  if (res.status == 200) {
                    item.total = res.data.total
                  }
                })
                .catch((error) => {
                  console.log(error)
                })
            })
          }
        })
        .catch((error) => {
          console.log(error)
        })
    },
    showBJData(NewType) {
      this.dialogVisible = true
      this.NewType = NewType
    },
    goLogin() {
      // clearInterval(this.timer);
      // this.$router.push('/login');
      //window.location.href="http://localhost:8080/login";
    },
    getCurrentTime() {
      const date = new Date()
      const y = date.getFullYear()
      const M = (date.getMonth() + 1).toString().padStart(2, 0)
      const d = date.getDate().toString().padStart(2, 0)
      const h = date.getHours().toString().padStart(2, 0)
      const mm = date.getMinutes().toString().padStart(2, 0)
      const s = date.getSeconds().toString().padStart(2, 0)
      this.time = y + '-' + M + '-' + d + ' ' + h + ':' + mm + ':' + s
    },
    InitFirstMenu() {
      var Enumerable = require('linq')
      this.$http({
        method: 'GET',
        url:
          this.api +
          '/api/Yw_Sys_Menu/GetMainMenu?usrId=' +
          sessionStorage.getItem('currentUserId'),
      })
        .then((res) => {
          if (res.status == 200) {
            this.menuData = Enumerable.from(res.data.data)
              .where((o) => o.menu_type == 1)
              .where((p) => p.menu_status == 1)
              .where((p) => p.menu_pid == 0)
              .orderBy('p=>p.menu_order')
              .toArray()
            sessionStorage.setItem('menuData', JSON.stringify(res.data.data))
            sessionStorage.setItem(
              'functionData',
              JSON.stringify(
                Enumerable.from(res.data.data)
                  .where((o) => o.menu_type == 2)
                  .toArray()
              )
            )
          }
        })
        .catch((error) => {
          console.log(error)
        })
    },
    InitTreeSStation() {
      var Enumerable = require('linq')
      var treeData_cache = JSON.parse(sessionStorage.getItem('TreeSStation'))
      if (
        !(
          typeof treeData_cache == 'string' &&
          JSON.parse(treeData_cache) != null
        )
      ) {
        this.$http({
          method: 'GET',
          url:
            this.api +
            '/api/Common/GetConfigTreeByUsrId?usrId=' +
            sessionStorage.getItem('currentUserId') +
            '&roleType=',
        })
          .then((res) => {
            if (res.status == 200) {
              var shengArr = Enumerable.from(res.data)
                .where("p=>p.sStationType=='STPCenter'")
                .toArray() //省
              var shiArr = Enumerable.from(res.data)
                .where("p=>p.sStationType=='STCenter'")
                .toArray() //市
              shiArr.forEach((shi) => {
                if (
                  shi.sStation == 'SS4294999' ||
                  shi.sStation == 'SS4295999' ||
                  shi.sStation == 'SS4296999' ||
                  shi.sStation == 'SS4297999'
                ) {
                  shi.children = Enumerable.from(res.data)
                    .where(
                      "p=>p.sStationType=='ST01' && p.parentSStation=='" +
                        shi.sStation +
                        "'"
                    )
                    .toArray()
                } else {
                  shi.children = Enumerable.from(res.data)
                    .where(
                      "p=>(p.sStationType=='ST06' || p.sStationType=='ST03') && p.areaCode==" +
                        shi.uniqueCode.substring(0, 6)
                    )
                    .toArray() //市下级的站点
                }
              })
              shengArr.forEach((sheng) => {
                sheng.children = shiArr
              })
              sessionStorage.setItem('TreeSStation', JSON.stringify(shengArr))
            }
          })
          .catch((error) => {
            console.log(error)
          })
      }
    },
    handleSelect(key, keyPath) {
      $emit(this, 'parentFn', { param: keyPath })
    },
  },
}
</script>

<style scoped>
#v_header {
  background: #062d91;
  height: 50px;
}
#v_header .logo {
  height: 60px;
  background: url('../../assets/Images/qcme.png') no-repeat left;
}
#v_header span.title {
  color: #fff;
  font-size: 28px;
  margin-left: 50px !important;
}
.el-menu--horizontal > .el-menu-item.is-active {
  border-bottom: 2px solid #fff;
  color: #062d91;
  background: #fff;
}
.el-menu {
  background-color: #062d91;
  color: #fff;
}
.el-menu > li {
  color: #fff;
  line-height: 80px;
}
.el-menu i {
  color: rgb(0, 255, 255);
  position: absolute;
  top: 10px;
  left: 37%;
}
.el-menu--horizontal > .el-menu-item.is-active i {
  color: #062d91;
}
.el-menu-item {
  font-size: 16px;
}
.userInfo {
  display: flex;
  line-height: 30px;
}
.userInfo .usr {
  text-align: left;
  font-size: 20px;
  margin-left: 20px !important;
}
.userInfo .time {
  font-size: 14px;
}
.userInfo .usr,
.userInfo .time {
  margin-left: 20px;
}
.userInfo .setting {
  font-size: 20px;
}
.exit {
  color: #fff;
}
</style>
